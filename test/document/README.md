# test - Flask Blueprint ç¤ºä¾‹é¡¹ç›®

> ä¸€ä¸ªå®Œæ•´çš„Flaskåº”ç”¨ç¤ºä¾‹,æ¼”ç¤ºè“å›¾(Blueprint)çš„ä½¿ç”¨å’Œæœ€ä½³å®è·µ

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

- âœ… **æ¨¡å—åŒ–è®¾è®¡**: ä½¿ç”¨è“å›¾ç»„ç»‡ä»£ç 
- âœ… **APIç‰ˆæœ¬æ§åˆ¶**: æ”¯æŒå¤šç‰ˆæœ¬APIå…±å­˜
- âœ… **å®Œæ•´æ–‡æ¡£**: è¯¦ç»†çš„ä½¿ç”¨æ‰‹å†Œå’Œå¿«é€Ÿå‚è€ƒ
- âœ… **æµ‹è¯•è„šæœ¬**: è‡ªåŠ¨åŒ–æµ‹è¯•æ‰€æœ‰è·¯ç”±
- âœ… **å¼€å‘ç¯å¢ƒ**: å®Œå–„çš„IDEé…ç½®å’Œè™šæ‹Ÿç¯å¢ƒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd /Users/lingk/work/py/demo/test
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 2. å¯åŠ¨åº”ç”¨

```bash
python run.py
```

åº”ç”¨å°†åœ¨ http://127.0.0.1:5000 å¯åŠ¨

### 3. è¿è¡Œæµ‹è¯•

```bash
# åœ¨å¦ä¸€ä¸ªç»ˆç«¯çª—å£
python test_blueprints.py
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
test/
â”œâ”€â”€ app/                          # åº”ç”¨ä¸»ç›®å½•
â”‚   â”œâ”€â”€ __init__.py              # Flaskåº”ç”¨,æ³¨å†Œè“å›¾
â”‚   â”œâ”€â”€ views.py                 # ä¸»è·¯ç”±
â”‚   â”œâ”€â”€ auth.py                  # è®¤è¯è·¯ç”±
â”‚   â”œâ”€â”€ models.py                # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ blueprints/              # è“å›¾æ¨¡å—
â”‚       â”œâ”€â”€ user.py              # ç”¨æˆ·è“å›¾
â”‚       â”œâ”€â”€ admin.py             # ç®¡ç†å‘˜è“å›¾
â”‚       â””â”€â”€ api.py               # APIè“å›¾(v1/v2)
â”‚
â”œâ”€â”€ document/                     # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ README.md                # æœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ é¡¹ç›®è¯´æ˜.md              # è¯¦ç»†é¡¹ç›®è¯´æ˜
â”‚   â”œâ”€â”€ Blueprintè“å›¾ä½¿ç”¨æ‰‹å†Œ.md  # è“å›¾æ•™ç¨‹
â”‚   â”œâ”€â”€ Blueprintå¿«é€Ÿå‚è€ƒ.md     # å¿«é€ŸæŸ¥è¯¢
â”‚   â”œâ”€â”€ Config.md                # ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ IDEé…ç½®è¯´æ˜.md           # IDEè®¾ç½®
â”‚
â”œâ”€â”€ run.py                       # å¯åŠ¨å…¥å£
â”œâ”€â”€ test_blueprints.py           # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ requirements.txt             # ä¾èµ–åˆ—è¡¨
â””â”€â”€ .gitignore                   # Gité…ç½®
```

## ğŸ¨ åŠŸèƒ½æ¨¡å—

### ä¸»åº”ç”¨è·¯ç”±

| è·¯ç”± | è¯´æ˜ |
|------|------|
| `/` | ä¸»é¡µ |
| `/login` | ç™»å½•é¡µ |

### ç”¨æˆ·è“å›¾ (`/user`)

| è·¯ç”± | è¯´æ˜ |
|------|------|
| `/user/` | ç”¨æˆ·é¦–é¡µ |
| `/user/profile` | ç”¨æˆ·èµ„æ–™ |
| `/user/profile/<id>` | æŒ‡å®šç”¨æˆ· |
| `/user/settings` | ç”¨æˆ·è®¾ç½® |

### ç®¡ç†å‘˜è“å›¾ (`/admin`)

| è·¯ç”± | è¯´æ˜ |
|------|------|
| `/admin/` | ç®¡ç†é¦–é¡µ |
| `/admin/dashboard` | ä»ªè¡¨ç›˜ |
| `/admin/users` | ç”¨æˆ·åˆ—è¡¨ |
| `/admin/users/<id>` | ç”¨æˆ·ç®¡ç† |
| `/admin/stats` | ç»Ÿè®¡ä¿¡æ¯ |

### APIè“å›¾

**v1** (`/api/v1`)
- `/api/v1/posts` - æ–‡ç« åˆ—è¡¨
- `/api/v1/posts/<id>` - æ–‡ç« è¯¦æƒ…

**v2** (`/api/v2`)
- `/api/v2/posts` - æ–‡ç« åˆ—è¡¨(å¢å¼º)
- `/api/v2/posts/<id>` - æ–‡ç« è¯¦æƒ…(å¢å¼º)
- `/api/v2/comments` - è¯„è®ºåˆ—è¡¨

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [README.md](./README.md) | æœ¬æ–‡ä»¶ - å¿«é€Ÿå¼€å§‹ |
| [é¡¹ç›®è¯´æ˜.md](./é¡¹ç›®è¯´æ˜.md) | è¯¦ç»†çš„é¡¹ç›®ä»‹ç» |
| [Blueprintè“å›¾ä½¿ç”¨æ‰‹å†Œ.md](./Blueprintè“å›¾ä½¿ç”¨æ‰‹å†Œ.md) | è“å›¾å®Œæ•´æ•™ç¨‹ |
| [Blueprintå¿«é€Ÿå‚è€ƒ.md](./Blueprintå¿«é€Ÿå‚è€ƒ.md) | è“å›¾å¿«é€ŸæŸ¥è¯¢ |
| [Config.md](./Config.md) | è™šæ‹Ÿç¯å¢ƒé…ç½® |
| [IDEé…ç½®è¯´æ˜.md](./IDEé…ç½®è¯´æ˜.md) | IDEå¼€å‘ç¯å¢ƒ |

## ğŸ§ª æµ‹è¯•ç¤ºä¾‹

```bash
# æµ‹è¯•ç”¨æˆ·è“å›¾
curl http://127.0.0.1:5000/user/
curl http://127.0.0.1:5000/user/profile/123

# æµ‹è¯•ç®¡ç†å‘˜è“å›¾
curl http://127.0.0.1:5000/admin/dashboard
curl "http://127.0.0.1:5000/admin/users?page=1&limit=10"

# æµ‹è¯•API
curl http://127.0.0.1:5000/api/v1/posts
curl http://127.0.0.1:5000/api/v2/posts
```

## ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ

### ä»€ä¹ˆæ˜¯è“å›¾?

è“å›¾(Blueprint)æ˜¯Flaskæä¾›çš„æ¨¡å—åŒ–å·¥å…·,å¯ä»¥å°†å¤§å‹åº”ç”¨åˆ†è§£æˆå¤šä¸ªç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ã€‚

```python
# åˆ›å»ºè“å›¾
user_bp = Blueprint('user', __name__, url_prefix='/user')

# å®šä¹‰è·¯ç”±
@user_bp.route('/profile')
def profile():
    return {'username': 'guest'}

# æ³¨å†Œè“å›¾
app.register_blueprint(user_bp)
```

### ä¸ºä»€ä¹ˆä½¿ç”¨è“å›¾?

- âœ… **æ¨¡å—åŒ–**: æ¸…æ™°çš„ä»£ç ç»„ç»‡
- âœ… **å¯é‡ç”¨**: è“å›¾å¯ä»¥åœ¨å¤šä¸ªåº”ç”¨ä¸­ä½¿ç”¨
- âœ… **å›¢é˜Ÿåä½œ**: ä¸åŒæˆå‘˜å¼€å‘ä¸åŒæ¨¡å—
- âœ… **URLç»„ç»‡**: ç»Ÿä¸€çš„URLå‰ç¼€ç®¡ç†
- âœ… **ç‰ˆæœ¬æ§åˆ¶**: æ–¹ä¾¿å®ç°APIç‰ˆæœ¬ç®¡ç†

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Python**: 3.12.2
- **Flask**: 3.1.2
- **Werkzeug**: 3.1.3
- **Jinja2**: 3.1.6
- **Requests**: 2.32.5 (æµ‹è¯•ç”¨)
- **Colorama**: 0.4.6 (æµ‹è¯•ç”¨)

## ğŸ“– å­¦ä¹ è·¯å¾„

### åˆå­¦è€…
1. é˜…è¯»æœ¬æ–‡æ¡£
2. è¿è¡Œåº”ç”¨å¹¶æµ‹è¯•è·¯ç”±
3. æŸ¥çœ‹ `app/views.py` å’Œ `app/auth.py`
4. ç†è§£åŸºæœ¬çš„Flaskè·¯ç”±

### è¿›é˜¶
1. é˜…è¯» [Blueprintè“å›¾ä½¿ç”¨æ‰‹å†Œ.md](./Blueprintè“å›¾ä½¿ç”¨æ‰‹å†Œ.md)
2. æŸ¥çœ‹ `app/blueprints/` ç›®å½•ä»£ç 
3. è¿è¡Œ `test_blueprints.py` æµ‹è¯•è„šæœ¬
4. å°è¯•åˆ›å»ºè‡ªå·±çš„è“å›¾

### ç¯å¢ƒé…ç½®
1. é˜…è¯» [Config.md](./Config.md)
2. é˜…è¯» [IDEé…ç½®è¯´æ˜.md](./IDEé…ç½®è¯´æ˜.md)
3. é…ç½®å¼€å‘ç¯å¢ƒ

## ğŸ” å¸¸ç”¨å‘½ä»¤

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è¿è¡Œåº”ç”¨
python run.py

# è¿è¡Œæµ‹è¯•
python test_blueprints.py

# æŸ¥çœ‹æ‰€æœ‰è·¯ç”±
python -c "from app import app; [print(f'{r.endpoint:35s} {r.rule}') for r in app.url_map.iter_rules()]"
```

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1: ModuleNotFoundError
```bash
# ç¡®ä¿æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate
pip install -r requirements.txt
```

### é—®é¢˜2: IDEæ˜¾ç¤ºå¯¼å…¥é”™è¯¯
å‚è€ƒ [IDEé…ç½®è¯´æ˜.md](./IDEé…ç½®è¯´æ˜.md)

### é—®é¢˜3: ç«¯å£è¢«å ç”¨
```bash
# æŸ¥æ‰¾å¹¶æ€æ­»å ç”¨è¿›ç¨‹
lsof -i :5000
kill -9 <PID>
```

## ğŸš§ æ‰©å±•å»ºè®®

- [ ] æ·»åŠ æ•°æ®åº“æ”¯æŒ(SQLAlchemy)
- [ ] å®ç°ç”¨æˆ·è®¤è¯(Flask-Login)
- [ ] æ·»åŠ è¡¨å•éªŒè¯(Flask-WTF)
- [ ] å®ç°RESTful API(Flask-RESTful)
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•(pytest)
- [ ] é…ç½®ç”Ÿäº§éƒ¨ç½²(Gunicorn)

## ğŸ“ å‚è€ƒèµ„æº

- [Flaskå®˜æ–¹æ–‡æ¡£](https://flask.palletsprojects.com/)
- [Flask Blueprintæ–‡æ¡£](https://flask.palletsprojects.com/en/latest/blueprints/)
- [Flaskä¸­æ–‡æ–‡æ¡£](https://dormousehole.readthedocs.io/)

---

**Happy Coding! ğŸ‰**
